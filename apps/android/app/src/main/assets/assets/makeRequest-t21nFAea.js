import{a as t}from"./colors-rNCG9YyA.js";import{m as e,u as o}from"./index-XyJYIhAT.js";import{S as a,B as r}from"./PanelHeaderWithBack-Mte7KJTI.js";var s=e("Icon28ErrorCircleOutline","error_circle_outline_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 28 28" id="error_circle_outline_28"><path fill="currentColor" d="M14 2c6.627 0 12 5.373 12 12s-5.373 12-12 12S2 20.627 2 14 7.373 2 14 2m0 2C8.477 4 4 8.477 4 14s4.477 10 10 10 10-4.477 10-10S19.523 4 14 4m0 13.6a1.4 1.4 0 1 1 0 2.8 1.4 1.4 0 0 1 0-2.8m.074-9.6c.237 0 .386.037.517.107q.196.106.302.302c.07.13.107.28.107.517v6.148c0 .237-.037.386-.107.517a.73.73 0 0 1-.302.302c-.13.07-.28.107-.517.107h-.148c-.237 0-.386-.037-.517-.107a.73.73 0 0 1-.302-.302c-.07-.13-.107-.28-.107-.517V8.926c0-.237.037-.386.107-.517a.73.73 0 0 1 .302-.302c.13-.07.28-.107.517-.107z" /></symbol>',28,28,!1,void 0);const n=401,c=429,i=520,l=/^[a-zA-Z0-9а-яА-ЯёЁ-]+$/,m=(e,a,r,l,m,u=!0)=>{if(!(e instanceof Response&&"statusText"in e))return l(!1),e;const h=o(s,{fill:t});switch(e.status){case c:r();break;case n:localStorage.clear(),m&&(null==m||m({before:h,title:"Ошибка при попытке сделать запрос",subtitle:"Перезайдите в аккаунт"}));break;case i:null==m||m({before:h,title:"Ошибка при попытке сделать запрос",subtitle:"Сообщите нам о проблеме"})}u&&a&&a(),l(!1)},u=async(t,e,o,r)=>{try{const s=await fetch(a+t,{method:o,headers:{"Content-Type":"application/json;charset=UTF-8",secret:e},body:r});return s.ok?await s.json():s}catch(t){if("TypeError: Failed to fetch"===t.toString())return new Response("",{status:520,headers:{"Content-Type":"application/json"}})}},h=async(t,e="GET",o)=>{const a=localStorage.getItem("token"),s=`${r}${t}`,c=new AbortController,i=setTimeout((()=>c.abort()),3e3);try{const r=await fetch(s,{method:e,headers:{"Content-Type":"application/json;charset=UTF-8",secret:a},body:o,signal:c.signal});return clearTimeout(i),r.status===n?r:r.ok?await r.json():u(t,a,e,o)}catch(r){return u(t,a,e,o)}};export{s as I,m as h,l,h as m};
