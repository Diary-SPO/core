var e=Object.defineProperty,a=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,t=(a,r,s)=>r in a?e(a,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[r]=s,l=(e,t)=>{var l={};for(var o in e)r.call(e,o)&&t.indexOf(o)<0&&(l[o]=e[o]);if(null!=e&&a)for(var o of a(e))t.indexOf(o)<0&&s.call(e,o)&&(l[o]=e[o]);return l};import{y as o,n,i,F as c,c as d,ac as m,e as _,au as f,T as u,av as h,u as p,H as y,M as v,aw as g,ax as b}from"./index-XyJYIhAT.js";import{H as k}from"./HorizontalScroll-pkeOEJmx.js";import{A as z}from"./Avatar-J1FZQEiI.js";import{C as N}from"./Caption-crA2LuIN.js";import"./chevron_24-u9G6Q-o1.js";const x="_HorizontalCell_1k356_1",C="_HorizontalCell__image_1k356_5",H="_HorizontalCell__body_1k356_10",w="_HorizontalCell__content_1k356_21",j="_HorizontalCell__subtitle_1k356_27",R={s:"_HorizontalCell--size-s_1k356_36",m:"_HorizontalCell--size-m_1k356_67",l:"_HorizontalCell--size-l_1k356_73"},O=e=>{var a=e,{size:r,children:s}=a,t=l(a,["size","children"]);return o("s"===r?N:m,t,s)},S=e=>{var m=e,{className:_,header:f,style:u,subtitle:h,size:p="s",children:y=o(z,{size:56}),getRootRef:v,getRef:g,extraSubtitle:b}=m,k=l(m,["className","header","style","subtitle","size","children","getRootRef","getRef","extraSubtitle"]);return o("div",{ref:v,style:u,className:d(x,R[p],_)},o(n,((e,l)=>{for(var o in l||(l={}))r.call(l,o)&&t(e,o,l[o]);if(a)for(var o of a(l))s.call(l,o)&&t(e,o,l[o]);return e})({className:H,getRootRef:g},k),i(y)&&o("div",{className:C},y),(f||h||b)&&o("div",{className:w},i(f)&&o(O,{size:p},f),i(h)&&o(c,{className:j},h),i(b)&&o(c,{className:j},b))))},$={display:"flex"},A=({day:e,lessonGrades:a})=>{if(!a.length)return;const r=_(),{setData:s}=f(),t=u((async(e,a)=>{s({data:e,lessonName:a}),await r.showModal(h)}),[e,a.length]);return p("div",{children:[p(y,{mode:"secondary",className:"recentMarks",children:e}),p("div",{style:$,children:a.map((({lessonName:e,task:a})=>{return p("div",{className:"marksWrapper",style:$,children:p(S,{onClick:()=>t(a,e),style:{maxWidth:"unset"},children:p(v,{bottom:(r=e,s=18,r.length>s&&0!==s?`${r.substring(0,s)}...`:r),style:{maxWidth:85},mark:g(a)})},`${e}_${a.id}_${a.type}`)},`${e}_${a.id}`);var r,s}))})]},e)},E=b((({lessonsState:e})=>{const a=(e=>{if(!e||!(null==e?void 0:e.length))return[];const a=new Map;return e.forEach((e=>{var r;const s=new Date(e.date).toLocaleDateString("ru");null==(r=e.lessons)||r.forEach((e=>{if(!e.name||!e.gradebook)return;const r=a.get(s)||[];e.gradebook.tasks.forEach((a=>{r.some((e=>e.task.id===a.id))||r.push({lessonName:e.name,task:a})})),a.set(s,r)}))})),Array.from(a.entries())})(e).reverse();if(a)return p(k,{showArrows:!0,getScrollToLeft:e=>e-120,getScrollToRight:e=>e+120,children:p("div",{style:{marginLeft:10,display:"flex",gap:10},children:a.map((([e,a])=>p(A,{day:e,lessonGrades:a})))})})}));export{E as default};
