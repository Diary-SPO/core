import{b as e,_ as s,h as t,p as a,u as n,D as i,P as r,B as o,L as l}from"./index-XyJYIhAT.js";import{B as c,P as d}from"./Placeholder-dIbI7TzN.js";import{P as m}from"./PanelHeaderWithBack-Mte7KJTI.js";import{m as u,h as f}from"./makeRequest-t21nFAea.js";import{u as h}from"./useRateLimitExceeded-afZtobbp.js";import"./colors-rNCG9YyA.js";const p=e((()=>s((()=>import("./index-dA-Fydqk.js")),__vite__mapDeps([0,1,2,3,4,5,6])))),j=({id:e})=>{const[s,o]=t(!1),[l,c]=t(!1),[d,j]=t(null),_=async()=>{c(!0),o(!1);try{const e=await(async()=>{const e=localStorage.getItem("id");return u(`/attestation/${e}`)})();if(f(e,(()=>o(!0)),h,c),e instanceof Response)return;j(e)}catch(e){o(!0)}finally{c(!1)}};a((()=>{_()}),[]);const v={};let y=null,P=null;if((null==d?void 0:d.students)&&(P=d.year,y=`\n    ${d.students[0].lastName}\n    ${d.students[0].firstName.slice(0,1)}.\n    ${d.students[0].middleName.slice(0,1)}.`),null==d?void 0:d.subjects){const e=`Семестр ${d.termNumber}`;v[e]||(v[e]=[]);for(const s of d.subjects)v[e].push(s)}return n(r,{nav:e,children:[n(m,{title:"Аттестация"}),n(i,{children:[n(p,{isDataLoading:l,semesters:v,studentName:y,year:P}),s&&n(k,{onClick:_})]})]})},k=({onClick:e})=>n(d,{header:"Ошибка при загрузке",action:n(c,{mode:"vertical",align:"center",children:[n(o,{size:"s",onClick:e,children:"Попробовать снова"}),n(l,{href:"https://vk.me/dnevnik_spo",target:"_blank",children:"Сообщить о проблеме"})]})});export{j as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/index-dA-Fydqk.js","assets/index-XyJYIhAT.js","assets/index-9d2Qwq0S.css","assets/Card-SOVpxpsd.js","assets/Card-4neL39Cp.css","assets/CardGrid-pEh1ThRX.js","assets/CardGrid-hRHHs9oZ.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
