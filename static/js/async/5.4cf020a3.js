"use strict";(self.webpackChunk_diary_spo_web=self.webpackChunk_diary_spo_web||[]).push([["5"],{547:function(e,r,t){t.r(r),t.d(r,{default:()=>j});var a=t("2322"),l=t("2277"),s=t("2784"),n=t("3292"),i=t("831"),c=t("128"),o=t("9344");let m=e=>{let r=o.GR[e];if("Д"!==r)return r||""},u=e=>{let r=[];for(let t of e.subjects){let a={subjectName:t.name,terms:[],finalMark:m(t.finalMark.value)||""};for(let r of e.academicYears)for(let e of r.terms){let l=t.marks[e.id],s={course:r.number,semester:e.number,mark:l?m(l.value)||".":""};a.terms.push(s)}r.push(a)}return r};var d=(0,t("7052").De)("Icon20CheckAlt","check_alt_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="check_alt_20"><path fill-rule="evenodd" d="M16.659 5.344a1.16 1.16 0 0 1 0 1.645L8.82 14.812a1.167 1.167 0 0 1-1.649 0l-3.83-3.823a1.16 1.16 0 0 1 0-1.646 1.167 1.167 0 0 1 1.648 0l3.007 3 7.013-7a1.167 1.167 0 0 1 1.649 0Z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0),h=t("490");let p=e=>{let{term:r}=e,t=(0,a.jsx)(h.vc,{id:"menubutton","aria-controls":"menupopup","aria-haspopup":"true",className:"marksGap",size:"s",mark:r.mark}),s=(0,a.jsxs)(l.ZCY,{className:"markPopoverContent",children:["."===r.mark?(0,a.jsx)(h.P7,{tooltipContent:"(отсутствует)",text:(0,a.jsxs)(a.Fragment,{children:["Оценка: ",t," "]})}):(0,a.jsxs)(l.vFK,{children:["Оценка: ",t," "]}),(0,a.jsxs)(l.vFK,{children:["Курс: ",r.course,", семестр: ",r.semester]})]});return(0,a.jsx)(l.J2e,{trigger:"click",id:"menupopup",role:"menu","aria-labelledby":"menubutton",content:s,children:(0,a.jsx)("div",{className:"markPopoverContentWrapper",children:t})})},f=e=>{let{subjectName:r,finalMark:t,terms:s}=e;return(0,a.jsx)(l.gy,{size:"l",children:(0,a.jsxs)(l.Zbd,{mode:"shadow",children:[(0,a.jsx)(l.ZCY,{children:(0,a.jsx)(l.Dxz,{level:"3",Component:"h3",children:r})}),(0,a.jsx)(l.uBF,{className:"terms",children:s.filter(e=>{let{mark:r}=e;return""!==r}).map(e=>(0,a.jsx)(p,{term:e},"".concat(e.course,"-").concat(e.semester)))}),(0,a.jsx)(l.jxt,{textWrap:"full",className:"totalMark",before:(0,a.jsx)(d,{}),after:t?(0,a.jsx)(n.vc,{size:"s",mark:t}):"отсутствует",children:"Итоговая оценка:"})]})})},x=e=>{let{data:r}=e,t=u(r);return(0,a.jsx)("div",{children:t.map((e,r)=>{let{subjectName:t,finalMark:l,terms:s}=e;return(0,a.jsx)(f,{subjectName:t,finalMark:l,terms:s},"".concat(t,"-").concat(r))})})},j=e=>{var r;let{setIsError:t,setIsLoading:o,isLoading:m}=e,[u,d]=(0,s.useState)(null);return((0,s.useEffect)(()=>{(async()=>{o(!0),t(!1);let e=localStorage.getItem("finalMarksData");try{if(e&&!(0,n.yy)("finalMarksData_time")){d(JSON.parse(e));return}let{data:r}=await (0,i.XY)();if((0,n._y)(r,()=>t(!0),c.V,o),(0,n.k0)(r)){t(!0);return}d(r),localStorage.setItem("finalMarksData",JSON.stringify(r)),localStorage.setItem("finalMarksData_time",JSON.stringify(Date.now()))}catch{t(!0)}finally{o(!1)}})()},[]),m)?void 0:(null==u?void 0:null===(r=u.subjects)||void 0===r?void 0:r.length)?(0,a.jsx)(l.ZAu,{mode:"plain",className:"tableWrapper",header:(0,a.jsx)(l.h4i,{mode:"tertiary",children:"Для подробностей нажми на оценку"}),children:(0,a.jsx)(x,{data:u})}):(0,a.jsx)(l.VmN,{children:"Данных нет"})}}}]);